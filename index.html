<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="./stylesheets/common.css" />
<link rel="stylesheet" href="./stylesheets/style.css" />

<title>主页</title>
</head>
<body>
<div class="screen">
	﻿<div class="header">
	<div class="online_state">
		
	</div>
	<div class="logo">
		<a href="/"><img id="header_logo" src="http://blog.yutouxiuxiu.com//images/logo.png" /></a>
	</div>
	<div class="description">
		芋家修修的技术博客 java,php,android,mysql,oracle,linux,mcu...
	</div>
</div>

	<div class="center">
		<div class="main">
		<div id="" class="post-home">
	
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="http://blog.yutouxiuxiu.com/posts/post_2098.html">
					老公去哪儿
				</a>
			</h2>
			<span class="post-time">
				2013-11-29 21:07
			</span>
		</div>
		<div class="post-content">
			<p>
	芋头：修修 你会唱小星星么？<br />
	修修：不会呀...<br />
	芋头：那我教你哦？<br />
	修修：好啊！<br />
	芋头：Twinkle twinkle little star<br />
	&nbsp;&nbsp; &nbsp;How i wonder what you are<br />
	修修：你有跑调哦！<br />
	芋头&amp;修修：(一起笑)
</p>

<p>
	芋头：我的家里有个人很酷<br />
	&nbsp;&nbsp; &nbsp;三头六臂刀枪不入<br />
	&nbsp;&nbsp; &nbsp;他的手掌也有一点粗<br />
	&nbsp;&nbsp; &nbsp;牵着我去玩耍跑步
</p>

<p>
	修修: 谢谢你光顾我的小植物<br />
	&nbsp;&nbsp; &nbsp;你是我写过最美的情书<br />
	&nbsp;&nbsp; &nbsp;钮扣住一个家的幸福<br />
	&nbsp;&nbsp; &nbsp;爱着你呀风雨无阻
</p>

<p>
	芋头：老公老公我们去哪里呀<br />
	&nbsp;&nbsp; &nbsp;有你在就天不怕地不怕<br />
	修修：芋头芋头我是你的大树<br />
	&nbsp;&nbsp; &nbsp;一生陪你看日出
</p>

<p>
	修修: &nbsp;这是第一次当你的老公<br />
	&nbsp;&nbsp; &nbsp;我的心情有一点的复杂<br />
	&nbsp;&nbsp; &nbsp;你拼命发芽我白了头发<br />
	&nbsp;&nbsp; &nbsp;一起生下芋圆娃娃
</p>

<p>
	芋头：老公老公我们吃什么呀<br />
	&nbsp;&nbsp; &nbsp;有你在就天不怕地不怕<br />
	修修：芋头芋头我是你的大厨<br />
	&nbsp;&nbsp; &nbsp;一生给你吃满足
</p>

<p>
	芋头: 我的老公是个神话<br />
	&nbsp;&nbsp; &nbsp;搞定芋头绝代风华<br />
	&nbsp;&nbsp; &nbsp;就算有天我们掉光牙<br />
	&nbsp;&nbsp; &nbsp;我们还要一起去火辣辣
</p>

<p>
	芋头：老公老公我们去哪里呀<br />
	&nbsp;&nbsp; &nbsp;有你在就天不怕地不怕<br />
	修修：芋头芋头我是你的大树<br />
	&nbsp;&nbsp; &nbsp;一生陪你看日出<br />
	芋头&amp;修修：啦啦啦啦啦啦啦
</p>

<p>
	芋头：老公老公我们吃什么呀<br />
	&nbsp;&nbsp; &nbsp;有你在就天不怕地不怕<br />
	修修：芋头芋头我是你的大树<br />
	&nbsp;&nbsp; &nbsp;一生陪你看日出
</p>

<p>
	芋头：老公老公我们去哪里呀<br />
	&nbsp;&nbsp; &nbsp;你就是我的天大和地大<br />
	修修：芋头芋头时间的手一挥<br />
	&nbsp;&nbsp; &nbsp;你是永远的珍贵
</p>

<p>
	芋头&amp;修修：啦啦啦啦啦啦啦
</p>

<p>
	芋头：一闪一闪亮晶晶<br />
	&nbsp;&nbsp; &nbsp;漫天都是小星星<br />
	&nbsp;&nbsp; &nbsp;Twinkle twinkle little star<br />
	&nbsp;&nbsp; &nbsp;How i wonder<br />
	修修：你又跑调咯！<br />
	芋头&amp;修修：(一起笑)
</p>

		</div>
	</div>
	
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="http://blog.yutouxiuxiu.com/posts/post_2091.html">
					爸爸去哪儿
				</a>
			</h2>
			<span class="post-time">
				2013-11-29 19:04
			</span>
		</div>
		<div class="post-content">
			<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/11/baba.jpg" rel="" style="" target="" title=""><img alt="baba" class="alignnone size-full wp-image-2094" height="404" src="http://localhost:8080/wp-content/uploads/2013/11/baba.jpg" style="" title="" width="566" /></a>
</p>

<p>
	Kimi：爸比 你会不会唱小星星么？<br />
	林志颖：不会呀...<br />
	Kimi：那我教你哦？<br />
	林志颖：好啊！<br />
	Kimi：Twinkle twinkle little star<br />
	How i wonder what you are<br />
	林志颖：你有跑调哦！<br />
	林志颖&amp;Kimi：(一起笑)
</p>

<p>
	张悦轩：我的家里有个人很酷<br />
	郭子睿：三头六臂刀枪不入<br />
	王诗龄：他的手掌也有一点粗<br />
	轩&amp;睿&amp;龄：牵着我学会了走路
</p>

<p>
	郭涛: 谢谢你光顾我的小怪物<br />
	张亮: 你是我写过最美的情书<br />
	王岳伦: 钮扣住一个家的幸福<br />
	张&amp;郭&amp;王: 爱着你呀风雨无阻
</p>

<p>
	郭子睿&amp;王诗龄&amp;张悦轩：老爸老爸我们去哪里呀<br />
	有我在就天不怕地不怕<br />
	郭涛&amp;王岳伦&amp;张亮：宝贝宝贝我是你的大树<br />
	一生陪你看日出
</p>

<p>
	郭涛: &nbsp;这是第一次当你的老爸<br />
	张亮: &nbsp;我们的心情都有点复杂<br />
	王岳伦 : &nbsp;你拼命发芽我白了头发<br />
	张&amp;郭&amp;王： 一起写下一撇一捺
</p>

<p>
	郭子睿&amp;王诗龄&amp;张悦轩：老爸老爸我们去哪里呀<br />
	有我在就天不怕地不怕<br />
	郭涛&amp;王岳伦&amp;张亮：宝贝宝贝我是你的大树<br />
	一生陪你看日出
</p>

<p>
	郭子睿: 我的老爸是个神话(郭涛：当然咯!)<br />
	王诗龄: 搞定老妈绝代风华(王岳伦：哈哈!)<br />
	张悦轩: 就算有天你掉光了牙(张亮：哎呦!)<br />
	睿&amp;龄&amp;轩: 我也可以带你去火辣辣(郭&amp;王&amp;张：耶!)
</p>

<p>
	郭子睿&amp;王诗龄&amp;张悦轩：老爸老爸我们去哪里呀<br />
	有我在就天不怕地不怕<br />
	郭涛&amp;王岳伦&amp;张亮：宝贝宝贝我是你的大树<br />
	一生陪你看日出<br />
	众： 啦啦啦啦啦啦啦
</p>

<p>
	郭子睿&amp;王诗龄&amp;张悦轩：老爸老爸我们去哪里呀<br />
	有我在就天不怕地不怕<br />
	郭涛&amp;王岳伦&amp;张亮：宝贝宝贝我是你的大树<br />
	一生陪你看日出
</p>

<p>
	郭子睿&amp;王诗龄&amp;张悦轩：老爸老爸我们去哪里呀<br />
	你就是我的天大和地大<br />
	郭涛&amp;王岳伦&amp;张亮：宝贝宝贝时间的手一挥<br />
	你是永远的珍贵
</p>

<p>
	大合唱：啦啦啦啦......
</p>

<p>
	林志颖：一闪一闪亮晶晶<br />
	漫天都是小星星<br />
	林志颖&amp;Kimi：Twinkle twinkle little star<br />
	How i wonder<br />
	林志颖：你又跑调咯！<br />
	林志颖&amp;Kimi：(一起笑)
</p>

		</div>
	</div>
	
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="http://blog.yutouxiuxiu.com/posts/post_2088.html">
					ThinkPHP - Model
				</a>
			</h2>
			<span class="post-time">
				2013-11-29 19:01
			</span>
		</div>
		<div class="post-content">
			<p>
	TP下的Model符合和数据库交互 和 校验数据
</p>

<h5>
	<strong>一、命名规则</strong>
</h5>

<blockquote>
	<p>
		表名Model extends Model {
	</p>

	<p>
		<span style="line-height: 1.6em;">}</span>
	</p>
</blockquote>

<p>
	表名使用大驼峰
</p>

<h5>
	<strong><span style="line-height: 1.6em;">二、实例化</span></strong>
</h5>

<p>
	假如说有个UserModel 想要实例化
</p>

<blockquote>
	<p>
		$userModel&nbsp;= D(&#39;User&#39;);
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>三、操作数据库</strong>
</h5>

<p>
	<strong>1.增加数据 add</strong>
</p>

<p>
	<strong>（1）CRM（数据关系映射）方式</strong>
</p>

<p style="margin-left: 40px;">
	数组的键与表的字段一一对应
</p>

<p style="margin-left: 40px;">
	数组与表的一行一一对应
</p>

<blockquote>
	<p>
		$xxxModel =&gt; D(&#39;Xxx&#39;);
	</p>

	<p>
		$data = array (
	</p>

	<p style="margin-left: 40px;">
		&#39;字段&#39; =&gt; &#39;值&#39;,
	</p>

	<p style="margin-left: 40px;">
		...
	</p>

	<p>
		);
	</p>

	<p>
		var_dump($xxxModel-&gt;add($data)); &nbsp; &nbsp;//插入成功返回主键 插入失败返回false
	</p>
</blockquote>

<p>
	<strong>（2）AR（Active Recodes 活动对象）方式</strong>
</p>

<p style="margin-left: 40px;">
	把对象的属性和表的字段对应
</p>

<p style="margin-left: 40px;">
	操作对象的属性 就是在操作表中的数据
</p>

<p style="margin-left: 40px;">
	保存对象 数据就保存了
</p>

<blockquote>
	<p>
		$userModel-&gt;D(&#39;User&#39;);
	</p>

	<p>
		$userModel-&gt;username = &#39;yutou&#39;;
	</p>

	<p>
		$userModel-&gt;password = &#39;123&#39;;
	</p>

	<p>
		$userModel-&gt;add();<span style="font-family: Georgia, Times, 'Times New Roman', serif; font-size: 13px; font-style: italic;">&nbsp;&nbsp; &nbsp;//插入成功返回主键 插入失败返回false</span>
	</p>
</blockquote>

<p>
	<strong>（3）原理</strong>
</p>

<blockquote>
	<p>
		/**<br />
		&nbsp;* ThinkPHP Model模型类<br />
		&nbsp;* 实现了ORM和ActiveRecords模式<br />
		&nbsp;* @category &nbsp; Think<br />
		&nbsp;* @package &nbsp;Think<br />
		&nbsp;* @subpackage &nbsp;Core<br />
		&nbsp;* @author &nbsp; &nbsp;liu21st &lt;liu21st@gmail.com&gt;<br />
		&nbsp;*/<br />
		class Model {
	</p>

	<p>
		&nbsp; &nbsp; // 数据信息<br />
		&nbsp; &nbsp; protected <strong><span style="color:#FF0000;">$data</span></strong> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; array();
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 新增数据<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param mixed $data 数据<br />
		&nbsp; &nbsp; &nbsp;* @param array $options 表达式<br />
		&nbsp; &nbsp; &nbsp;* @param boolean $replace 是否replace<br />
		&nbsp; &nbsp; &nbsp;* @return mixed<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function <strong><span style="color:#FF0000;">add($data=&#39;&#39;</span></strong>,$options=array(),$replace=false) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(empty($data)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // <strong><span style="color:#FF0000;">没有传递数据，获取当前数据对象的值</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!empty($this-&gt;data)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; $this-&gt;data;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 重置数据<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;data &nbsp; &nbsp; = array();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;error &nbsp; &nbsp;= L(&#39;_DATA_TYPE_INVALID_&#39;);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 分析表达式<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp;= &nbsp; $this-&gt;_parseOptions($options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 数据处理<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $data &nbsp; &nbsp; &nbsp; = &nbsp; $this-&gt;<strong><span style="color:#FF0000;">_facade($data)</span></strong>;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ <strong><span style="color:#FF0000;">过滤非字段的数据</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(false === $this-&gt;_before_insert($data,$options)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 写入数据到数据库<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $result = $this-&gt;db-&gt;insert($data,$options,$replace);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; <span style="color:#FF0000;"><strong>if(false !== $result ) {</strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong>$insertId &nbsp; = &nbsp; $this-&gt;getLastInsID();</strong></span><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($insertId) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 自增主键返回插入ID<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data[$this->getPk()] &nbsp;= $insertId;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_after_insert($data,$options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $insertId;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_after_insert($data,$options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return $result;<br />
		&nbsp; &nbsp; }
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 对保存到数据库的数据进行处理<br />
		&nbsp; &nbsp; &nbsp;* @access protected<br />
		&nbsp; &nbsp; &nbsp;* @param mixed $data 要操作的数据<br />
		&nbsp; &nbsp; &nbsp;* @return boolean<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; &nbsp;protected function <strong><span style="color:#FF0000;">_facade</span></strong>($data) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 检查非数据字段<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(!empty($this-&gt;fields)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($data as $key=&gt;$val){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">if(!in_array($key,$this-&gt;fields,true)){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($data[$key]);</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }elseif(is_scalar($val)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 字段类型检查<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_parseType($data,$key);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 安全过滤<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(!empty($this-&gt;options['filter'])) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data = array_map($this-&gt;options['filter'],$data);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($this-&gt;options['filter']);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_before_write($data);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return $data;<br />
		&nbsp; &nbsp; &nbsp;}
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 设置数据对象的值<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $name 名称<br />
		&nbsp; &nbsp; &nbsp;* @param mixed $value 值<br />
		&nbsp; &nbsp; &nbsp;* @return void<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function __set($name,$value) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 设置数据对象属性<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;data[$name] &nbsp;= &nbsp; $value;<br />
		&nbsp; &nbsp; }
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 获取数据对象的值<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $name 名称<br />
		&nbsp; &nbsp; &nbsp;* @return mixed<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function __get($name) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return isset($this-&gt;data[$name])?$this->data[$name]:null;<br />
		&nbsp; &nbsp; }
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 检测数据对象的值<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $name 名称<br />
		&nbsp; &nbsp; &nbsp;* @return boolean<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function __isset($name) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return isset($this-&gt;data[$name]);<br />
		&nbsp; &nbsp; }
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 销毁数据对象的值<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $name 名称<br />
		&nbsp; &nbsp; &nbsp;* @return void<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function __unset($name) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; unset($this-&gt;data[$name]);<br />
		&nbsp; &nbsp; }
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	<strong>2.修改数据 save</strong>
</p>

<p>
	<strong>（1）CRM方式</strong>
</p>

<blockquote>
	<p>
		$data = array(...); &nbsp;//不包含主键
	</p>

	<p>
		$options = array(&#39;where&#39;&nbsp;=&gt; &#39;&#39;);
	</p>

	<p>
		$userModel-&gt;save($data, $options);
	</p>
</blockquote>

<blockquote>
	<p>
		$data = array(...); &nbsp;//包含主键
	</p>

	<p>
		<span style="font-size: 13px;">$userModel-&gt;save($data);</span>
	</p>
</blockquote>

<p>
	<strong><span style="font-size: 13px;">（2）AR方式</span></strong>
</p>

<blockquote>
	<p>
		$userModel-&gt;id = 1;
	</p>

	<p>
		$userModel-&gt;username = &#39;&#39;;
	</p>

	<p>
		$userModel-&gt;save();
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	<strong>（3）原理</strong>
</p>

<blockquote>
	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 保存数据<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param mixed $data 数据<br />
		&nbsp; &nbsp; &nbsp;* @param array $options 表达式<br />
		&nbsp; &nbsp; &nbsp;* @return boolean<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function save($data=&#39;&#39;,$options=array()) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(empty($data)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 没有传递数据，获取当前数据对象的值<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!empty($this-&gt;data)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $data &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; $this-&gt;data;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 重置数据<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;data &nbsp; &nbsp; = &nbsp; array();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;error &nbsp; &nbsp;= &nbsp; L(&#39;_DATA_TYPE_INVALID_&#39;);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 数据处理<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $data &nbsp; &nbsp; &nbsp; = &nbsp; $this-&gt;_facade($data);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 分析表达式<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp;= &nbsp; $this-&gt;_parseOptions($options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $pk &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; $this-&gt;getPk();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(!isset($options['where']) ) {&nbsp;&nbsp; &nbsp;// ~ 如果没传option的where条件 就到$data数组里找主键的值 如果都没有 就报错<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 如果存在主键数据 则自动作为更新条件<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($data[$pk])) {&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ $data数组里 有没有以主键作为键名的单元<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $where[$pk] &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; $data[$pk]; &nbsp;&nbsp;&nbsp; &nbsp;// ~ where $pk=$data[$pk]<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $options['where'] &nbsp; = &nbsp; $where;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset($data[$pk]);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 如果没有任何更新条件则不执行<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;error &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; L(&#39;_OPERATION_WRONG_&#39;);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(is_array($options['where']) &amp;&amp; isset($options['where'][$pk])){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pkValue &nbsp; &nbsp;= &nbsp; $options['where'][$pk];<br />
		&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(false === $this-&gt;_before_update($data,$options)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; } &nbsp; &nbsp; &nbsp; &nbsp;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $result &nbsp; &nbsp; = &nbsp; $this-&gt;db-&gt;update($data,$options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(false !== $result) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($pkValue)) $data[$pk] &nbsp; = &nbsp;$pkValue;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_after_update($data,$options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return $result;<br />
		&nbsp; &nbsp; }
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	<strong>3.options</strong>
</p>

<p style="font-size: 13px;">
	存放SQL查询条件的数组
</p>

<blockquote style="font-size: 13px;">
	<p>
		<span style="line-height: 1.6em;">$options = array (&#39;where&#39;</span><span style="line-height: 1.6em;">&nbsp;=&gt; &#39;email=&quot;yutou@xiuxiu.com&quot;&#39;,&nbsp;</span><span style="line-height: 1.6em;">&#39;order&#39;&nbsp;=&gt; &#39;id desc&#39;,&nbsp;</span><span style="line-height: 1.6em;">&#39;limit&#39; =&gt; &#39;2&#39;);</span>
	</p>

	<p>
		<span style="line-height: 1.6em;">/* 结果</span>
	</p>

	<p>
		<span style="line-height: 1.6em;">Array</span>
	</p>

	<p>
		<span style="line-height: 1.6em;">(</span>
	</p>

	<p style="margin-left: 40px;">
		[where] =&gt;&nbsp;email=&quot;yutou@xiuxiu.com&quot;
	</p>

	<p style="margin-left: 40px;">
		[order] =&gt;&nbsp;id desc
	</p>

	<p style="margin-left: 40px;">
		[limit] =&gt; 2
	</p>

	<p style="margin-left: 40px;">
		[table] =&gt; user
	</p>

	<p style="margin-left: 40px;">
		[model] =&gt; User
	</p>

	<p>
		<span style="line-height: 1.6em;">)</span>
	</p>

	<p>
		<span style="line-height: 1.6em;">*/</span>
	</p>
</blockquote>

<p style="font-size: 13px;">
	options原理
</p>

<blockquote style="font-size: 13px;">
	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 查询数据集<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param array $options 表达式参数<br />
		&nbsp; &nbsp; &nbsp;* @return mixed<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function select($options=array()) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp;<strong><span style="color: rgb(255, 0, 0);">&nbsp;if(is_string($options) || is_numeric($options))</span></strong>&nbsp;{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 根据主键查询<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pk &nbsp; = &nbsp;$this-&gt;getPk();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<strong><span style="color: rgb(255, 0, 0);">if(strpos($options,&#39;,&#39;)) {</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $where[$pk] &nbsp; &nbsp; = &nbsp;array(&#39;IN&#39;,$options);&nbsp;&nbsp; &nbsp;// ~ WHERE $pk IN(...,...,...)<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $where[$pk] &nbsp; &nbsp; = &nbsp;$options;&nbsp;&nbsp; &nbsp;// ~ WHERE $pk=...<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp;array();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $options['where'] &nbsp; = &nbsp;$where;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<strong><span style="color: rgb(255, 0, 0);">elseif(false === $options)</span></strong>{ // 用于子查询 不查询只返回SQL<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp;array();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 分析表达式<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp;$this-&gt;_parseOptions($options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return &nbsp;&#39;( &#39;.$this-&gt;db-&gt;buildSelectSql($options).&#39; )&#39;;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; // 分析表达式<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $options &nbsp; &nbsp;= &nbsp;$this-&gt;_parseOptions($options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $resultSet &nbsp;= $this-&gt;db-&gt;select($options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(false === $resultSet) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(empty($resultSet)) { // 查询结果为空<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return null;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_after_select($resultSet,$options);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return $resultSet;<br />
		&nbsp; &nbsp; }
	</p>

	<div>
		&nbsp;
	</div>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	<strong>3.查询 select</strong>
</p>

<p>
	可以传options到select中
</p>

<blockquote>
	<p>
		$options = array(...);
	</p>

	<p>
		$userModel-&gt;select($options);
	</p>
</blockquote>

<p>
	也可以使用连贯操作
</p>

<blockquote>
	<p>
		$userModel-&gt;where(&#39;id&lt;5&#39;)-&gt;order(&#39;id desc&#39;)-&gt;limit(3)-&gt;select(); &nbsp; &nbsp;
	</p>
</blockquote>

<p>
	连贯操作原理
</p>

<blockquote>
	<p>
		&nbsp; &nbsp; // 链操作方法列表<br />
		&nbsp; &nbsp; protected <strong><span style="color:#FF0000;">$methods</span></strong> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; array(&#39;table&#39;,&#39;order&#39;,&#39;alias&#39;,&#39;having&#39;,&#39;group&#39;,&#39;lock&#39;,&#39;distinct&#39;,&#39;auto&#39;,&#39;filter&#39;,&#39;validate&#39;,&#39;result&#39;,&#39;bind&#39;,&#39;token&#39;);
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 利用__call方法实现一些特殊的Model方法<br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $method 方法名称<br />
		&nbsp; &nbsp; &nbsp;* @param array $args 调用参数<br />
		&nbsp; &nbsp; &nbsp;* @return mixed<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function <strong><span style="color:#FF0000;">__call($method,$args)</span></strong> {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(in_array(strtolower($method),<span style="color:#FF0000;"><strong>$this-&gt;methods</strong></span>,true)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 连贯操作的实现<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">$this-&gt;options[strtolower($method)] = &nbsp; $args[0];</span></strong>&nbsp;&nbsp; &nbsp;// ~ 将操作的参数放到options数组中<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color:#FF0000;"><strong>return $this;</strong></span>&nbsp;&nbsp; &nbsp;// ~ 因为return $this 所以可以链式操作
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

		</div>
	</div>
	
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="http://blog.yutouxiuxiu.com/posts/post_2082.html">
					ThinkPHP - Module
				</a>
			</h2>
			<span class="post-time">
				2013-11-28 20:05
			</span>
		</div>
		<div class="post-content">
			<h5>
	<strong style="line-height: 1.2em; font-size: 13px;">一、语法规范</strong>
</h5>

<blockquote>
	<p>
		XxxAction extends Action {
	</p>

	<p>
		}
	</p>
</blockquote>

<p>
	首字母大写
</p>

<p>
	在APP_DEBUG模式下 windows下开发 也强制区分大小写
</p>

<p>
	&nbsp;
</p>

<h5>
	<strong>二、空操作</strong>
</h5>

<p>
	当访问存在Module中不存在的方法时 则执行_empty方法（如果存在）
</p>

<p>
	<span style="color:#0000FF;">ThinkPHP/Lib/Core/Action.class.php</span>
</p>

<blockquote>
	<p>
		/**<br />
		&nbsp;* ThinkPHP Action控制器基类 抽象类<br />
		&nbsp;* @category &nbsp; Think<br />
		&nbsp;* @package &nbsp;Think<br />
		&nbsp;* @subpackage &nbsp;Core<br />
		&nbsp;* @author &nbsp; liu21st &lt;liu21st@gmail.com&gt;<br />
		&nbsp;*/<br />
		abstract class Action {
	</p>

	<p>
		&nbsp; &nbsp; 。。。。。。
	</p>

	<p>
		&nbsp; &nbsp; /**<br />
		&nbsp; &nbsp; &nbsp;* 魔术方法 <strong><span style="color:#FF0000;">有不存在的操作的时候执行</span></strong><br />
		&nbsp; &nbsp; &nbsp;* @access public<br />
		&nbsp; &nbsp; &nbsp;* @param string $method 方法名<br />
		&nbsp; &nbsp; &nbsp;* @param array $args 参数<br />
		&nbsp; &nbsp; &nbsp;* @return mixed<br />
		&nbsp; &nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; public function <strong><span style="color:#FF0000;">__call</span></strong>($method,$args) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if( 0 === strcasecmp($method,ACTION_NAME.C(&#39;ACTION_SUFFIX&#39;))) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(method_exists($this,&#39;_empty&#39;)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // <strong><span style="color:#FF0000;">如果定义了_empty操作 则调用</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;_empty($method,$args);
	</p>

	<p>
		。。。。。。
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>三、前置、后置操作</strong>
</h5>

<p>
	如果存在的话 调用方法之前会调用前置操作 调用方法之后会调用后置操作
</p>

<p>
	<span style="color:#0000FF;">ThinkPHP/Lib/Core/App.class.php</span>
</p>

<blockquote>
	<p>
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //执行当前操作<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $method = &nbsp; new ReflectionMethod($module, $action);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ ReflectionMethod 类报告了一个方法的有关信息。<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;/* ~<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public __construct ( mixed $class , string $name )<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;class &nbsp;- &nbsp;Classname or object (instance of the class) that contains the method.<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;name &nbsp;- &nbsp;Name of the method.<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($method-&gt;isPublic()) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $class &nbsp;= &nbsp; new ReflectionClass($module);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // <strong><span style="color:#FF0000;">前置操作</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($class-&gt;hasMethod(&#39;_before_&#39;.$action)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $before = &nbsp; $class-&gt;getMethod(<span style="color:#FF0000;"><strong>&#39;_before_&#39;.$action</strong></span>);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ 比如说要调用index方法 _before_index方法就会在这里执行<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($before-&gt;isPublic()) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">$before-&gt;invoke($module);</span></strong><br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;/* ~<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public mixed invoke ( object $object [, mixed $parameter [, mixed $... ]] )<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Invokes a reflected method.<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;object &nbsp;- &nbsp;The object to invoke the method on. For static methods, pass null to this parameter.<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;parameter &nbsp;- &nbsp;Zero or more parameters to be passed to the method. It accepts a variable number of parameters which are passed to the method.<br />
		&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;*/<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // URL参数绑定检测<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(C(&#39;URL_PARAMS_BIND&#39;) &amp;&amp; $method-&gt;getNumberOfParameters()&gt;0){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch($_SERVER['REQUEST_METHOD']) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case &#39;POST&#39;:<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $vars &nbsp; &nbsp;= &nbsp;array_merge($_GET,$_POST);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case &#39;PUT&#39;:<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parse_str(file_get_contents(&#39;php://input&#39;), $vars);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default:<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $vars &nbsp;= &nbsp;$_GET;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $params = &nbsp;$method-&gt;getParameters();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($params as $param){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $name = $param-&gt;getName();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($vars[$name])) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $args[] = &nbsp;$vars[$name];<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }elseif($param-&gt;isDefaultValueAvailable()){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $args[] = $param-&gt;getDefaultValue();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw_exception(L(&#39;_PARAM_ERROR_&#39;).&#39;:&#39;.$name);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $method-&gt;invokeArgs($module,$args);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ Invokes the reflected method and pass its arguments as array.<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $method-&gt;invoke($module);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // <span style="color:#FF0000;"><strong>后置操作</strong></span><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($class-&gt;hasMethod(<strong><span style="color:#FF0000;">&#39;_after_&#39;.$action</span></strong>)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $after = &nbsp; $class-&gt;getMethod(&#39;_after_&#39;.$action);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($after-&gt;isPublic()) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">$after-&gt;invoke($module);</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 操作方法不是Public 抛出异常<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new ReflectionException();<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>四、空模块</strong>
</h5>

<p>
	如果要访问的模块不存在
</p>

<p>
	先判断__hack_module()函数是否存在 则使用该函数返回的Action对象作为$module
</p>

<p>
	<span style="color: rgb(0, 0, 255); font-size: 13px;">ThinkPHP/Lib/Core/App.class.php</span>
</p>

<blockquote>
	<p>
		&nbsp; &nbsp; &nbsp; &nbsp; if(!$module) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(&#39;4e5e5d7364f443e28fbf0d3ae744a59a&#39; == MODULE_NAME) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; header(&quot;Content-type:image/png&quot;);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exit(base64_decode(App::logo()));<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong><span style="color:#FF0000;"> if(function_exists(&#39;__hack_module&#39;))</span></strong> {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // hack 方式定义扩展模块 返回Action对象<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">$module = __hack_module();</span></strong><br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!is_object($module)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 不再继续执行 直接返回<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return ;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 是否定义Empty模块<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <strong><span style="color:#FF0000;">$module = A($group.&#39;Empty&#39;);</span></strong>&nbsp;&nbsp; &nbsp;// ~ 如果定义了<strong><span style="color:#FF0000;">EmptyAction</span></strong>.class.php 就执行 空模块 可以定制错误页面和进行URL优化<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!$module){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _404(L(&#39;_MODULE_NOT_EXIST_&#39;).&#39;:&#39;.MODULE_NAME);&nbsp;&nbsp; &nbsp;// ~ 如果连EmptyAction也没有 就进行报错<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>五、跨模块调用</strong>
</h5>

<p>
	使用快捷函数A 如果已经实例化了 则获取已经实例化的对象 没有才创建
</p>

<blockquote>
	<p>
		$other = A(&#39;Other&#39;);
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<p>
	<span style="color:#0000FF;">ThinkPHP/Common/common.php</span>
</p>

<blockquote>
	<p>
		/**<br />
		&nbsp;* A函数用于实例化Action 格式：[项目://][分组/]模块<br />
		&nbsp;* @param string $name Action资源地址<br />
		&nbsp;* @param string $layer 控制层名称<br />
		&nbsp;* @param boolean $common 是否公共目录<br />
		&nbsp;* @return Action|false<br />
		&nbsp;*/<br />
		function A($name,$layer=&#39;&#39;,$common=false) {<br />
		&nbsp; &nbsp;<strong><span style="color:#FF0000;"> static $_action = array();&nbsp;&nbsp; &nbsp;// ~ 静态数组存储已经实例化的action 用注册模式实现action的单例</span></strong><br />
		&nbsp; &nbsp; $layer &nbsp; &nbsp; &nbsp;= &nbsp; $layer?$layer:C(&#39;DEFAULT_C_LAYER&#39;);<br />
		&nbsp; &nbsp; if(strpos($name,&#39;://&#39;)) {// 指定项目<br />
		&nbsp; &nbsp; &nbsp; &nbsp; list($app) &nbsp;= &nbsp; explode(&#39;://&#39;,$name);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $name &nbsp; = &nbsp;str_replace(&#39;://&#39;,&#39;/&#39;.$layer.&#39;/&#39;,$name);<br />
		&nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $app &nbsp; &nbsp;= &nbsp; &#39;@&#39;;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $name &nbsp; = &nbsp;&#39;@/&#39;.$layer.&#39;/&#39;.$name;<br />
		&nbsp; &nbsp; }<br />
		&nbsp; &nbsp;<strong><span style="color:#FF0000;"> if(isset($_action[$name])) &nbsp;return $_action[$name];&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ 如果已经注册了该action的实例就直接返回</span></strong><br />
		&nbsp; &nbsp; $path &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; explode(&#39;/&#39;,$name);<br />
		&nbsp; &nbsp; if($list = C(&#39;EXTEND_GROUP_LIST&#39;) &amp;&amp; isset($list[$app])){ // 扩展分组<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $baseUrl &nbsp; &nbsp;= &nbsp; $list[$app];<br />
		&nbsp; &nbsp; &nbsp; &nbsp; import($path[2].'/'.$path[1].'/'.$path[3].$layer,$baseUrl);<br />
		&nbsp; &nbsp; }elseif(count($path)&gt;3 &amp;&amp; 1 == C(&#39;APP_GROUP_MODE&#39;)) { // 独立分组<br />
		&nbsp; &nbsp; &nbsp; &nbsp; $baseUrl &nbsp; &nbsp;= &nbsp; $path[0]== '@' ? dirname(BASE_LIB_PATH) : APP_PATH.'../'.$path[0].&#39;/&#39;.C(&#39;APP_GROUP_PATH&#39;).&#39;/&#39;;<br />
		&nbsp; &nbsp; &nbsp; &nbsp; import($path[2].'/'.$path[1].'/'.$path[3].$layer,$baseUrl);<br />
		&nbsp; &nbsp; }elseif($common) { // 加载公共类库目录<br />
		&nbsp; &nbsp; &nbsp; &nbsp; import(str_replace(&#39;@/&#39;,&#39;&#39;,$name).$layer,LIB_PATH);<br />
		&nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; import($name.$layer);<br />
		&nbsp; &nbsp; }<br />
		&nbsp; &nbsp; $class &nbsp; &nbsp; &nbsp;= &nbsp; basename($name.$layer);<br />
		&nbsp; &nbsp; if(class_exists($class,false)) {<br />
		<strong><span style="color:#FF0000;">&nbsp; &nbsp; &nbsp; &nbsp; $action &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = &nbsp; new $class();&nbsp;&nbsp; &nbsp;// ~ 如果action未被注册到静态数组 也就是没有实例化 则实例化并注册</span></strong><br />
		<strong><span style="color:#FF0000;">&nbsp; &nbsp; &nbsp; &nbsp; $_action[$name] &nbsp; &nbsp; = &nbsp; $action;</span></strong><br />
		<strong><span style="color:#FF0000;">&nbsp; &nbsp; &nbsp; &nbsp; return $action;</span></strong><br />
		&nbsp; &nbsp; }else {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; }<br />
		}
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>六、远程调用</strong>
</h5>

<p>
	直接调用某个Module中的Action方法
</p>

<blockquote>
	<p>
		R(&#39;Module/action&#39;);
	</p>
</blockquote>

<p>
	<span style="color:#0000FF;">ThinkPHP/Common/common.php</span>
</p>

<blockquote>
	<p>
		/**<br />
		&nbsp;* 远程调用模块的操作方法 URL 参数格式 [项目://][分组/]模块/操作<br />
		&nbsp;* @param string $url 调用地址<br />
		&nbsp;* @param string|array $vars 调用参数 支持字符串和数组&nbsp;<br />
		&nbsp;* @param string $layer 要调用的控制层名称<br />
		&nbsp;* @return mixed<br />
		&nbsp;*/<br />
		function R($url,$vars=array(),$layer=&#39;&#39;) {<br />
		&nbsp; &nbsp; $info &nbsp; = &nbsp; pathinfo($url);<br />
		&nbsp; &nbsp; $action = &nbsp; $info['basename'];<br />
		&nbsp; &nbsp; $module = &nbsp; $info['dirname'];<br />
		&nbsp; &nbsp; $class &nbsp;= &nbsp; A($module,$layer);<br />
		&nbsp; &nbsp; if($class){<br />
		&nbsp; &nbsp; &nbsp; &nbsp; if(is_string($vars)) {<br />
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parse_str($vars,$vars);<br />
		&nbsp; &nbsp; &nbsp; &nbsp; }<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return call_user_func_array(array(&amp;$class,$action.C(&#39;ACTION_SUFFIX&#39;)),$vars);<br />
		&nbsp; &nbsp; }else{<br />
		&nbsp; &nbsp; &nbsp; &nbsp; return false;<br />
		&nbsp; &nbsp; }<br />
		}
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>七、跨项目调用</strong>
</h5>

<blockquote>
	<p>
		项目目录名://Module/action
	</p>
</blockquote>

<p>
	<span style="color: rgb(0, 0, 255); font-size: 13px;">ThinkPHP/Common/common.php</span>
</p>

<blockquote>
	<p>
		&nbsp; &nbsp; &nbsp; &nbsp; $baseUrl &nbsp; &nbsp;= &nbsp; $path[0]== '@' ? dirname(BASE_LIB_PATH) : APP_PATH.'../'.$path[0].&#39;/&#39;.C(&#39;APP_GROUP_PATH&#39;).&#39;/&#39;;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// ~ 两个项目必须在同一级目录 才能远程调用<br />
		&nbsp; &nbsp; &nbsp; &nbsp; import($path[2].'/'.$path[1].'/'.$path[3].$layer,$baseUrl);
	</p>
</blockquote>

<p>
	&nbsp;
</p>

<h5>
	<strong>八、模块分组</strong>
</h5>

<p>
	当一个应用有不同类别的模块的时候 就用到了模块分组
</p>

<p>
	比如说有Home和Admin两组模块 希望通过 index.php/Home 或直接通过 index.php 访问 Home分组下的模块 通过 index.php/Admin 访问 Admin分组下的模块
</p>

<p>
	<strong>1.配置分组</strong>
</p>

<p>
	<span style="color:#0000FF;">应用路径/Conf/config.php</span>
</p>

<blockquote>
	<p>
		return array(
	</p>

	<p style="margin-left: 40px;">
		&#39;APP_GROUP_LIST&#39;&nbsp;=&gt; &#39;Home,Admin&#39;; &nbsp; &nbsp;//分组列表 用逗号隔开
	</p>

	<p style="margin-left: 40px;">
		&#39;DEFAULT_GROUP&#39; =&gt; &#39;Home&#39;; &nbsp;//默认分组 在URL上不指定分组时采用的分组
	</p>

	<p>
		)
	</p>
</blockquote>

<p>
	<strong>2.在分组下编写Action</strong>
</p>

<p>
	分别在指定的分组下编写Action
</p>

<p>
	<span style="color:#0000FF;">应用路径/Lib/Action/Home</span>
</p>

<p>
	<span style="color:#0000FF;"><span style="font-size: 13px;">应用路径/Lib/Action/Admin</span></span>
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>3.分组前后目录结构</strong>
</p>

<table border="0" cellpadding="0" cellspacing="1">
	<tbody>
		<tr>
			<th>
				项目目录
			</th>
			<th>
				分组(以Home和Admin分组为例)
			</th>
			<th>
				不分组
			</th>
		</tr>
		<tr>
			<td>
				公共目录<br />
				（Common）
			</td>
			<td>
				<p>
					Home分组：Common/Home/function.php
				</p>

				<p>
					Admin分组：Common/Admin/function.php
				</p>

				<p>
					公共文件：Common/common.php
				</p>
			</td>
			<td>
				Common/common.php
			</td>
		</tr>
		<tr>
			<td>
				配置目录<br />
				（Conf）
			</td>
			<td>
				<p>
					Home分组：Conf/Home/config.php
				</p>

				<p>
					Admin分组：Conf/Admin/config.php
				</p>

				<p>
					公共配置：Conf/config.php
				</p>
			</td>
			<td>
				Conf/config.php
			</td>
		</tr>
		<tr>
			<td>
				Action目录
			</td>
			<td>
				<p>
					Home分组：Lib/Action/Home/
				</p>

				<p>
					Admin分组：Lib/Action/Admin/
				</p>

				<p>
					公共Action：Lib/Action/
				</p>
			</td>
			<td>
				Lib/Action/
			</td>
		</tr>
		<tr>
			<td>
				Model&nbsp;目录
			</td>
			<td>
				Lib/Model/
			</td>
			<td>
				Lib/Model/
			</td>
		</tr>
		<tr>
			<td>
				语言包目录（Lang&nbsp;以zh-cn为例）
			</td>
			<td>
				<p>
					Home分组：Lang/zh-cn/Home/lang.php
				</p>

				<p>
					Admin分组：Lang/zh-cn/Admin/lang.php
				</p>

				<p>
					公共语言包：Lang/zh-cn/common.php
				</p>
			</td>
			<td>
				Lang/zh-cn/common.php
			</td>
		</tr>
		<tr>
			<td>
				模板目录（Tpl以theme主题为例）
			</td>
			<td>
				<p>
					Home分组：Tpl/Home/theme/
				</p>

				<p>
					Admin分组：Tpl/Admin/theme/
				</p>
			</td>
			<td>
				Tpl/theme/
			</td>
		</tr>
		<tr>
			<td>
				运行时目录（Runtime）
			</td>
			<td>
				<p>
					Home分组：Runtime/Home/
				</p>

				<p>
					Admin分组：Runtime/Admin/
				</p>
			</td>
			<td>
				Runtime/
			</td>
		</tr>
	</tbody>
</table>

<p>
	&nbsp;
</p>

<p>
	<strong>4.URL设置</strong>
</p>

<table border="0" cellpadding="0" cellspacing="1">
	<tbody>
		<tr>
			<td>
				TMPL_FILE_DEPR
			</td>
			<td>
				分组模板下面模块和操作的分隔符，默认值为&ldquo;/&rdquo;
			</td>
		</tr>
		<tr>
			<td>
				VAR_GROUP
			</td>
			<td>
				分组的URL参数名，默认为g（普通模式URL才需要）
			</td>
		</tr>
	</tbody>
</table>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

		</div>
	</div>
	
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="http://blog.yutouxiuxiu.com/posts/post_2080.html">
					ThinkPHP - URL模式
				</a>
			</h2>
			<span class="post-time">
				2013-11-28 19:29
			</span>
		</div>
		<div class="post-content">
			<h5>
	<strong>一、四种模式</strong>
</h5>

<p>
	<span style="color:#0000FF;">runtime.php</span>
</p>

<p>
	<span style="color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);">&nbsp; &nbsp; define(&#39;URL_COMMON&#39;, &nbsp; &nbsp; &nbsp;0); &nbsp; //普通模式</span><br style="margin: 0px; padding: 0px; color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);" />
	<span style="color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);">&nbsp; &nbsp; define(&#39;URL_PATHINFO&#39;, &nbsp; &nbsp;1); &nbsp; //PATHINFO模式</span><br style="margin: 0px; padding: 0px; color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);" />
	<span style="color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);">&nbsp; &nbsp; define(&#39;URL_REWRITE&#39;, &nbsp; &nbsp; 2); &nbsp; //REWRITE模式</span><br style="margin: 0px; padding: 0px; color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);" />
	<span style="color: rgb(84, 84, 84); font-family: 'Microsoft YaHei', helvetica, Arial, Tahoma, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(246, 246, 246);">&nbsp; &nbsp; define(&#39;URL_COMPAT&#39;, &nbsp; &nbsp; &nbsp;3); &nbsp; // 兼容模式</span>
</p>

<p>
	<strong>0.COMMON</strong>
</p>

<p>
	任何服务器都支持
</p>

<p>
	<span style="font-size: 13px;">index.php?m=ModuleName&amp;a=actionName</span>
</p>

<p>
	像上面那样 通过参数指定访问的模块方法
</p>

<p>
	<strong>更改参数名</strong>
</p>

<p>
	VAR_MODULE
</p>

<p>
	VAR_ACTION
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>1.PATHINFO（默认）</strong>
</p>

<p>
	Apache服务器支持的好 别的不好说
</p>

<p>
	通过$_SERVER['PATH_INFO']获取
</p>

<p>
	比如&ldquo;index.php?id=1&rdquo;的PATH_INFO是&ldquo;?id=1&rdquo;
</p>

<p>
	&ldquo;index.php/Index/index&rdquo;的PATH_INFO就是&ldquo;<span style="font-size: 13px;">/Index/index</span>&rdquo;然后根据分隔符&ldquo;/&rdquo;进行拆分
</p>

<p>
	<strong>更改默认模式</strong>
</p>

<p>
	URL_MODEL
</p>

<p>
	如果设置了0,1,3模式 只有服务器不支持PATHINFO时 才有区别 否则会解析URL看用哪种方式解析
</p>

<p>
	<strong>更改分隔符</strong>
</p>

<p>
	URL_PATHINFO_DEPR
</p>

<p>
	&nbsp;
</p>

<h5>
	<strong>2.REWRITE伪静态</strong>
</h5>

<p>
	比如说访问thread-1234.html不一定访问的就是这个页面 它真正的是thread.php?tid=1234 这叫做URL重写
</p>

<p>
	就可以隐藏真正的地址
</p>

<p>
	&nbsp;
</p>

		</div>
	</div>
	
</div>

		</div>
		<div class="sidebar">
		<div id="csidebar">
	<ul>
		<li class="widget widget_recent_entries">
			<h3>分类目录</h3>
			<ul>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_1.html" style="margin-left: 0px;">未分类</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_2.html" style="margin-left: 0px;">HTML</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_3.html" style="margin-left: 10px;">JavaScript</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_17.html" style="margin-left: 10px;">css</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_4.html" style="margin-left: 0px;">Java基础</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_13.html" style="margin-left: 10px;">集合</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_5.html" style="margin-left: 0px;">Web基础</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_6.html" style="margin-left: 10px;">XML</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_20.html" style="margin-left: 10px;">JSP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_23.html" style="margin-left: 10px;">Servlet</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_7.html" style="margin-left: 0px;">分类总结</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_8.html" style="margin-left: 0px;">千奇百怪问题库</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_9.html" style="margin-left: 0px;">小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_18.html" style="margin-left: 10px;">HTML小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_24.html" style="margin-left: 10px;">Servlet小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_10.html" style="margin-left: 0px;">数据库</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_19.html" style="margin-left: 10px;">JDBC</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_28.html" style="margin-left: 20px;">测试</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_21.html" style="margin-left: 10px;">MySQL</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_22.html" style="margin-left: 10px;">Oracle</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_25.html" style="margin-left: 10px;">SQL</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_11.html" style="margin-left: 0px;">框架</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_26.html" style="margin-left: 10px;">Struts2</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_29.html" style="margin-left: 10px;">Hibernate</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_30.html" style="margin-left: 10px;">Spring</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_31.html" style="margin-left: 10px;">jBPM</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_34.html" style="margin-left: 10px;">Zend framework</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_35.html" style="margin-left: 10px;">Extjs</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_39.html" style="margin-left: 10px;">ThinkPHP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_12.html" style="margin-left: 0px;">软件使用</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_27.html" style="margin-left: 10px;">WordPress</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_14.html" style="margin-left: 0px;">面试</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_15.html" style="margin-left: 0px;">项目开发经验</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_16.html" style="margin-left: 0px;">项目进度</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_32.html" style="margin-left: 0px;">缓存技术</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_33.html" style="margin-left: 10px;">Memcached</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_36.html" style="margin-left: 0px;">项目管理工具</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_37.html" style="margin-left: 0px;">Linux</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_38.html" style="margin-left: 0px;">PHP基础</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_40.html" style="margin-left: 0px;">喜欢的歌</a></li>
				
			</ul>
		</li>
	</ul>
</div>

		</div>
	</div>
	<div class="footer">
	<div class="copyright">© 2013 芋头修修家 版权所有</div>
</div>

</div>
</body>
</html>
