<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../stylesheets/common.css" />
<link rel="stylesheet" href="../stylesheets/style.css" />

<title>基础网络概念</title>
</head>
<body>
<div class="screen">
	﻿<div class="header">
	<div class="online_state">
		
	</div>
	<div class="logo">
		<a href="/"><img id="header_logo" src="http://blog.yutouxiuxiu.com//images/logo.png" /></a>
	</div>
	<div class="description">
		芋家修修的技术博客 java,php,android,mysql,oracle,linux,mcu...
	</div>
</div>

	<div class="center">
		<div class="main">
		<div id="" class="post-home">
	<div class="a-post">
		<div class="post-title">
			<h2>
				<a rel="bookmark" href="">
					基础网络概念
				</a>
			</h2>
			<span class="post-time">
				{ post:time }
			</span>
		</div>
		<div class="post-content">
			<h5>
	<strong>一、广域网使用的设备</strong>
</h5>

<p>
	广域网使用的设备价格较为低廉
</p>

<p>
	1.传统电话拨接：透过 ppp 协议
</p>

<p>
	<span style="line-height: 1.6em;">早期网络大概都只能透过调制解调器加上电话线以及计算机的九针串行端口</span>，然后透过 Point-to-Point Protocol (PPP 协议)&nbsp;<br />
	配合拨接程序来取得网络 IP 参数，这样就能够上网了。不过这样的速度非常慢，而且当电话拨接后， 就不能够讲电话了！
</p>

<p>
	2.<span style="color:#FF0000;"><strong>非对称数位用路回路 </strong></span>(Asymmetric Digital Subscriber Line, ADSL)：
</p>

<p>
	透过 pppoe 协议也是透过电话线来拨接后取得 IP 的一个方法，只不过这个方式使用的是电话的高频部分，与一般讲电话的频率不同。 因此妳可以一边使用 ADSL 上网同时透过同一个电话号码来打电话聊天。由于上传/下载的带宽不同， &nbsp;因此才称为非对称的回路。ADSL 同样使用调制解调器，只是他透过的是 PPPoE (PPP&nbsp;over Ethernet) 的方法！ 将 PPP 仿真在以太网络卡上，因此你的主机需要透过一张网络卡来连接到调制解调器，并透过拨接程序来取得新的接口 (ppp0) 喔！
</p>

<p>
	3.电缆调制解调器 (Cable modem)
</p>

<p>
	主要透过有线电视使用的缆线作为网络讯号媒体，同样需要具备调制解调器来连接到 ISP，以取得网络参数来上网。 Cable modem 的带宽主要是分享型的，所以通常具有区域性，并不是你想装就能装的哩！
</p>

<p>
	&nbsp;
</p>

<h5>
	<strong><span style="line-height: 1.6em;">二、局域网使用的设备</span></strong>
</h5>

<p>
	在局域网络的环境中，我们最常使用的就是以太网络。当然啦，在某些超高速网络应用的环境中， 还可能会用到价格相当昂贵的光纤信道哩。只是如同前面提到的，以太网络因为已经标准化了，设备设置费用相对低廉， 所以一般你会听到什么网络线或者是网络媒体，几乎都是使用以太网络来架设的环境啦！ 只是这里还是要提醒您，整个网络世界并非仅有以太网络这个硬件接口喔！
</p>

<p>
	<strong>1.以太网的速度与标准</strong>
</p>

<p>
	以太网络的流行主要是它成为国际公认的标准所致。早先 IEEE 所制订的以太网络标准为 802.3 的 IEEE 10BASE5 ，这个标准主要的定义是：『10 代表传输速度为10Mbps， BASE 表示采用基频信号来进行传输，至于 5 则是指每个网络节点之间最长可达 500 公尺。』
</p>

<p>
	&nbsp;
</p>

<blockquote>
	<p>
		我们看到的网络提供者 (Internet Services Provider, ISP) 所宣称他们的 ADSL 传输速度可以达到 下行/上行 2Mbps/128Kbps&nbsp;(Kbits per second) 时，那个 Kb 指的可不是 bytes 而是 bits&nbsp;喔！所以 2M/128K 在实际的档案大小传输速度上面，最大理论的传输为 256KBps/16 KBps(KBytes per second)，所以正常下载的速度约在每秒 100~200 KBytes 之间吶！ &nbsp;同样的道理，在网络卡或者是一些网络媒体的广告上面，他们都会宣称自己的产品可以自动辨识传输速度为 10/100 Mbps ( Mega-bits per second)，呵呵！<strong><span style="color:#FF0000;">该数值还是得再除以 8 才是我们一般常用的档案容量计算的单位bytes 喔！</span></strong>
	</p>
</blockquote>

<p>
	后来 IEEE 更制订了 802.3u 这个支持到 100Mbps 传输速度的 100BASE-T 标准，这个标准与 10BASE-T 差异不大， 只是双绞线线材制作需要更精良，同时也已经支持使用了
</p>

<p>
	四对绞线的网络线了， <strong><span style="color:#FF0000;">也就是目前很常见的八蕊网络线吶！这种网络线我们常称为等级五 (Category 5, CAT5) 的网络线。 这种传输速度的以太网络就被称为 Fast&nbsp;ethernet 。</span></strong>
</p>

<p>
	至于目前我们常常听到的 Gigabit 网络速度 1000 Mbps 又是什么吶？那就是 Gigabit ethernet 哩！只是 Gigabit ethernet 的网络线就需要更加的精良。
</p>

<table border="1" cellpadding="1" cellspacing="1" style="width: 500px;">
	<tbody>
		<tr>
			<td>
				<span style="font-size: 13px;">名称</span>
			</td>
			<td>
				<span style="font-size: 13px;">速度</span>
			</td>
			<td>
				<span style="font-size: 13px;">网络线等级</span>
			</td>
		</tr>
		<tr>
			<td>
				<span style="font-size: 13px;">以太网络(Ethernet)</span>
			</td>
			<td>
				<span style="font-size: 13px;">10Mbps</span>
			</td>
			<td>
				-
			</td>
		</tr>
		<tr>
			<td>
				<span style="font-size: 13px;">高速以太网络(Fast Ethernet)</span>
			</td>
			<td>
				<span style="font-size: 13px;">100Mbps（12M/s）</span>
			</td>
			<td>
				<span style="font-size: 13px;">CAT 5</span>
			</td>
		</tr>
		<tr>
			<td>
				<span style="font-size: 13px;">超高速以太网络(Gigabit Ethernet)&nbsp;</span>
			</td>
			<td>
				<span style="font-size: 13px;">1000Mbps（125M/s）</span>
			</td>
			<td>
				<span style="font-size: 13px;">CAT 5e/CAT 6</span>
			</td>
		</tr>
	</tbody>
</table>

<p>
	<span style="line-height: 1.6em;">为什么每当传输速度增加时，网络线的要求就更严格呢？这是因为当传输速度增加时，</span>线材的电磁效应相互干扰会增强， 因此在网络线的制作时就得需要特别注意线材的质料以及内部线蕊心之间的缠绕情况配置等， 以使电子流之间的电磁干扰降到最小，才能使传输速度提升到应有的 Gigabit 。 &nbsp;
</p>

<p>
	所以说，在以太网络世界当中，如果你想要提升原有的 fast ethernet 到 gigabit ethernet 的话， 除了网络卡需要升级之外，主机与主机之间的网络线， &nbsp;以及连接主机线路的集线器/交换器等，都必须要提升到可以<br />
	支持 gigabit 速度等级的设备才行喔！
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>2.以太网络的网络线接头</strong>
</p>

<p>
	目前在以太网络上最常见到的接头就是 RJ-45 的网络接头，共有八蕊的接头
</p>

<p>
	接头名称\蕊线顺序 &nbsp; 1 &nbsp; &nbsp;2 &nbsp; 3 &nbsp; &nbsp; 4 &nbsp; 5 &nbsp; &nbsp;6 &nbsp; &nbsp;7 &nbsp; &nbsp;8<br />
	568A &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;白绿 &nbsp;绿 &nbsp;白橙 &nbsp;蓝 &nbsp;白蓝 &nbsp;橙 &nbsp;白棕 &nbsp;棕<br />
	568B &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;白橙 &nbsp;橙 &nbsp;白绿 &nbsp;蓝 &nbsp;白蓝 &nbsp;绿 &nbsp;白棕 &nbsp;棕
</p>

<p>
	 &nbsp; &nbsp;跳线：一边为 568A 一边为 568B 的接头时称为跳线，用在直接链接两部主<br />
	机的网络卡。<br />
	 &nbsp; &nbsp;并行线：两边接头同为 568A 或同为 568B 时称为并行线，用在链接主机网<br />
	络卡与集线器之间的线材；
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>3.以太网络的传输协议：CSMA/CD</strong>
</p>

<p>
	整个以太网络的重心就是以太网络卡啦！所以说，以太网络的传输主要就是网络卡对网络卡之间的数据传递而已。 每张以太网络卡出厂时，就会赋予一个独一无二的卡号，那就是所谓的 MAC (Media Access Control) 啦！ 理论上，网卡卡号是不能修改的，不过某些笔记本电脑的网卡卡号是能够修改的呦！
</p>

<p>
	那么以太网络的网卡之间数据是如何传输的呢？那就得要谈一下 IEEE 802.3 的标准 CSMA/CD (Carrier Sense&nbsp;Multiple Access &nbsp;with Collision Detection) 了！
</p>

<p>
	我们以下图来作为简介，下图内的中心点为集线器， 各个主机都是联机到集线器，然后透过集线器的功能向所有主机发起联机的。&nbsp;
</p>

<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/12/a.jpg" rel="" style="" target="" title=""><img alt="a" class="alignnone size-full wp-image-2182" height="200" src="http://localhost:8080/wp-content/uploads/2013/12/a.jpg" style="" title="" width="308" /></a>
</p>

<p>
	集线器是一种网络共享媒体，什么是网络共享媒体啊？想象一下上述的环境就像一个十字路口，而集线器就是那个路口！ 这个路口一次只允许一辆车通过,也就是说，网络共享媒体在单一时间点内， 仅能被一部主机所使用。
</p>

<p>
	我们以上图中的 A 要发给 D 网卡为例好了
</p>

<blockquote>
	<p>
		1.监听媒体使用情况 (Carrier Sense)：A 主机要发送网络封包前，需要先对网络媒体进行监听，确认没有人在使用后， 才能够发送出讯框；
	</p>

	<p>
		2.多点传输 (Multiple Access)：A 主机所送出的数据会被集线器复制一份，然后传送给所有连接到此集线器的主机！ 也就是说， A 所送出的数据， B, C,&nbsp;<br />
		D 三部计算机都能够接收的到！但由于目标是 D 主机，因此 B 与 C 会将此讯框数据丢弃，而 D 则会抓下来处理；
	</p>

	<p>
		3.碰撞侦测 (Collision Detection)：该讯框数据附有检测能力，若其他主机例如 B 计算机也刚好在同时间发送讯框数据时， &nbsp;那么 A 与 B 送出的数据碰撞在一块 (出车祸) ，此时这些讯框就是损毁，那么 A 与 B 就会各自随机等待一个时间， 然后重新透过第一步再传送一次该讯框数据。
	</p>
</blockquote>

<p>
	<strong>网络忙碌时，集线器灯号闪个不停，但我的主机明明没有使用网络：</strong>
</p>

<p>
	透过上述的流程我们会知道，不管哪一部主机发送出讯框，所有的计算机都会接收到！因为集线器会复制一份该数据给所有计算机。 因此，虽然只有一部主机在对外联机，但是在集线器上面的所有计算机灯号就都会闪个不停！&nbsp;
</p>

<p>
	<strong>我的计算机明明没有被入侵，为何我的数据会被隔壁的计算机窃取：</strong>
</p>

<p>
	透过上述的流程，我们只要在 B 计算机上面安装一套监听软件，这套软件将原本要丢弃的讯框数据捉下来分析，并且加以重组， &nbsp;就能够知道原本 A 所送出的讯息了。这也是为什么我们都建议重要数据在因特网上面得要『加密』后再传输！
</p>

<p>
	<strong>既然共享媒体只有一个主机可以使用，为何大家可以同时上网：</strong>
</p>

<p>
	这个问题就有趣了，既然共享媒体一次只能被一个主机所使用，那么万一我传输100MB 的档案，集线器就得被我使用 80 秒 (以 10Mbps 传输时)，在这期间其他人都不可以使用吗？不是的，由于标准的讯框数据在网络卡与其他以太网络媒体一次只能传输 1500bytes，因此我的 100MB 档案就得要拆成多个小数据报，然后一个一个的传送，每个数据报传送前都要经过 CSMA/CD 的机制。 &nbsp;所以，这个集线器的使用权是大家抢着用的！即使只有一部主机在使用网络媒体时，那么这部主机在发送每个封包间， 也都是需要等待一段时间的 (96 bit time)！
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>4.MAC封装格式</strong>
</p>

<p>
	上面提到的 CSMA/CD 传送出去的讯框数据，其实就是 MAC 啦！ MAC 其实就是我们上面一直讲到的讯框 (frame) 啰！ &nbsp;只是这个讯框上面有两个很重要的数据，就是目标与来源的网卡卡号，因此我们又简称网卡卡号为 MAC 而已。 &nbsp;简单的说，你可以把 MAC&nbsp;想成是一个在网络线上面传递的包裹，而这个包裹是整个网络硬件上面传送数据的最小单位了。 也就是说，网络线可想成是一条『一次仅可通过一个人』的独木桥， 而 MAC&nbsp;就是在这个独木桥上面动的人啦！
</p>

<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/12/b.jpg"><img alt="b" class="alignnone size-full wp-image-2183" height="63" src="http://localhost:8080/wp-content/uploads/2013/12/b.jpg" width="495" /></a>
</p>

<p>
	硬件地址最小由 00:00:00:00:00:00 到 FF:FF:FF:FF:FF:FF&nbsp;(16 进位法)， 这 6 bytes 当中，前 3bytes 为厂商的代码，后 3bytes 则是该厂商自行设定的装置码了。&nbsp;
</p>

<p>
	在这个 MAC 的传送中，他仅在局域网络内生效，如果跨过不同的网域 (这个后面 IP 的部分时会介绍)，那么来源与目的的硬件地址就会跟着改变了
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>路由器的MAC</strong>
</p>

<p>
	<span style="line-height: 1.6em;">先由 MAC-1 传送到 MAC-2 ，此时来源是 MAC-1 而目的地是 MAC-2；</span>
</p>

<p>
	B 计算机接收后，察看该讯框，发现目标其实是 C 计算机，而为了与 C 计算机沟通， 所以他会将讯框内的来源 MAC 改为 MAC-3 ，而目的改为 MAC-4 ，如此就可以直接传送到 C 计算机了。
</p>

<p>
	也就是说，只要透过 B (就是路由器) 才将封包送到另一个网域 (IP 部分会讲)&nbsp;去的时候， 那么讯框内的硬件地址就会被改变，然后才能够在同一个网域里面直接进行讯框的流通啊！
</p>

<p>
	<strong>寝室里腾达的路由：</strong>
</p>

<table align="center" border="0" cellpadding="0" cellspacing="0" class="content3" id="table2" style="font-family: 宋体, 'Times New Roman'; margin-top: 0px; width: 498px; line-height: 30px;">
	<tbody>
		<tr class="a2" style="background-color: rgb(242, 242, 242); cursor: default;">
			<td align="right" width="100">
				LAN MAC 地址
			</td>
			<td>
				&nbsp;&nbsp;&nbsp;&nbsp;C8:3A:35:08:E4:48
			</td>
		</tr>
		<tr class="a1" style="background-color: rgb(211, 211, 212); cursor: default;">
			<td align="right" width="100">
				WAN MAC 地址
			</td>
			<td>
				&nbsp;&nbsp;&nbsp;&nbsp;C8:3A:35:08:E4:48
			</td>
		</tr>
	</tbody>
</table>

<p>
	&nbsp;
</p>

<p>
	<strong>5.&nbsp;MTU 最大传输单位</strong>
</p>

<p>
	标准以太网络讯框所能传送的数据量最<br />
	大可以到达 1500 bytes ， 这个数值就被我们称为 MTU (Maximum Transmission Unit,&nbsp;<br />
	最大传输单位)。 你得要注意的是，每种网络接口的 MTU 都不相同，因此有的时候在<br />
	某些网络文章上面你会看到 1492 bytes 的 MTU 等等。不过，在以太网络上，标准的<br />
	定义就是 1500 bytes。
</p>

<p>
	<strong style="font-size: 13px;">寝室里腾达的路由：</strong>
</p>

<table cellpadding="0" cellspacing="0" class="content1" id="table1" style="font-family: 宋体, 'Times New Roman'; margin-top: 0px; line-height: 30px; width: 498px;">
	<tbody>
		<tr class="a2" style="background-color: rgb(242, 242, 242); cursor: default;">
			<td align="right" width="100">
				MTU
			</td>
			<td>
				&nbsp;&nbsp;&nbsp;&nbsp;<input class="text" name="MTU" size="4" style="border: 1px solid rgb(0, 0, 0); color: rgb(0, 0, 0); height: 18px; padding-left: 3px; padding-right: 3px;" value="1492" />(如非必要，请勿改动，默认值1492)
			</td>
		</tr>
	</tbody>
</table>

<p>
	IP 封包最大可以到 65535 bytes，比 MTU&nbsp;还要大呢！既然礼物 (IP) 都比盒子 (MAC) 大，那怎么可能放的进去啊？所以啰， &nbsp;IP&nbsp;封包是可以进行拆解的，然后才能放到 MAC 当中啊！等到数据都传到目的地， &nbsp;再由目的的主机将他组装回来就是了。所以啰，如果 MTU 能够大一些的话，那么 IP 封包的拆解情况就会降低， &nbsp;封包与封包传送之间的等待时间 (前一小节提到的 96 bit time)&nbsp;也会减少，就能够增加网络带宽的使用啰！
</p>

<p>
	为了这个目的，所以 Gigabit 的以太网络媒体才有支持 Jumbo frame 的嘛！这个Jumbo frame 一般都定义到 9000bytes。 那你会说，既然如此，我们的 MTU 能不能改成 9000bytes 呢？这样一来不就能够减少数据封包的拆解，以增加网络使用率吗？ 是这样没错，而且，你也确实可以在 Linux 系统上更改 MTU 的！但是，如果考虑到整个网络，那么我们不建议你修改这个数值。 为什么呢？
</p>

<p>
	我们的封包总是需要在 Internet 上面跑吧？你无法确认所有的网络媒体都是支持那么大的 MTU 对吧！ 如果你的 9000 bytes 封包通过一个不支持 Jumbo frame 的网络媒体时，好一点的是该网络媒体 (例如 switch/router 等) 会主动的帮你重组而进行传送，差一点的可能就直接回报这个封包无效而丢弃了～这个时候可就糗大啰～所以， MTU 设定为 9000 这种事情，大概仅能在内部网络的环境中作～举例来说，很多的内部丛集系统 (cluster) 就将他们的内部网络环境 MTU 设定为 9000，但是对外的适配卡可还是原本的标准 1500 喔！ ^_^
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>6.集线器、交换机</strong>
</p>

<p>
	当一个很忙碌的网络在运作时，集线器 (hub) 这个网络共享媒体就可能会发生碰撞的情况， &nbsp;这是因为 CSMA/CD 的缘故。那有没有办法避免这种莫名其妙的封包碰撞情况呢？有的，那就使用非共享媒体的交换器即可啊！
</p>

<p>
	<strong><span style="color:#FF0000;">交换器与集线器最大的差异，在于交换器内有一个特别的内存， 这个内存可以记录每个 switch port 与其连接的 PC 的 MAC 地址，所以，当来自 switch 两端的 PC 要互传数据时，每个讯框将直接透过交换器的内存数据而传送到目标主机上！ 所以 switch 不是共享媒体，且 switch 的每个埠口 (port) 都具有独立的带宽喔！</span></strong>
</p>

<p>
	举例来说，10/100 的 Hub 上链接 5 部主机，那么整个 10/100Mbps 是分给这五部主机的， 所以这五部主机总共只能使用 10/100Mbps 而已。那如果是switch 呢？由于『每个 port 都具有 10/100Mbps 的带宽』， &nbsp;所以就看你当时的传输行为是如何啰！举例来说，如果是底下的状况时，每个联机都是 10/100&nbsp;Mbps 的。
</p>

<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/12/c.jpg" rel="" style="" target="" title=""><img alt="c" class="alignnone size-full wp-image-2184" height="191" src="http://localhost:8080/wp-content/uploads/2013/12/c.jpg" style="" title="" width="260" /></a><br />
	A 传送到 D 与 B 传送到 C 都独自拥有 10/100Mbps 的带宽，两边并不会互相影响！ &nbsp;
</p>

<p>
	不过，如果是 A 与 D 都传给 C 时，由于 C port 就仅有 10/100Mbps ，<span style="line-height: 1.6em;">等于 A 与 D 都需要抢 C 节点的 10/100Mbps 来用的意思。 &nbsp;总之，你就是得要</span>记得的是，switch 已经克服了封包碰撞的问题，因为他有个 switch port 对应MAC 的相关功能， 所以 switch 并非共享媒体喔！
</p>

<p>
	现在的switch 规格很多， 在选购的时候，千万记得选购可以支持全双工/半双工，以及支持 Jumbo frame 的为佳！
</p>

<p>
	<strong>什么是全双工/半双工(full-duplex, half-duplex)</strong>
</p>

<p>
	前面谈到网络线时，我们知道八蕊的网络线实际上仅有两对被使用，一对是用在传送，另一对则是在接收。 如果两端的 PC 同时支持全双工时，那表示Input/Output 均可达到 10/100Mbps， 亦即数据的传送与接收同时均可达到10/100bps 的意思，总带宽则可达到 20/200Mbps 啰 (其实是有点语病的，因为Input 可达 10/100Mbps， output 可达 10/100Mbps ， 而不是 Input 可直接达到 20/200Mbps 喔！ )如果你的网络环境想要达到全双工时， &nbsp;使用共享媒体的Hub 是不可能的，因为网络线脚位的关系，无法使用共享媒体来达到全双工的！如果你的 switch 也支持全双工模式，那么在 switch 两端的 PC 才能达到全双工喔！
</p>

<p>
	<strong>自动分辨网络线跳线或并行线 (Auto MDI/MDIX)</strong>
</p>

<p>
	那么我们是否需要自行分辨并行线与跳线呢？不需要啦！因为 switch 若含有auto MDI/MDIX 的功能时， 会自动分辨网络线的脚位来调整联机的，所以你就不需要管你的网络线是跳线还是并行线啰！方便吧！ ^_^
</p>

<p data-spm="1000983">
	<strong><span style="line-height: 1.6em;">淘宝 16口10/100M自适应以太网交换机&nbsp;</span><span style="line-height: 1.6em;">TL-SF1016D：</span></strong>
</p>

<p>
	16个10/100M 自适应RJ45端口
</p>

<p>
	所有端口均支持线速数据转发
</p>

<p>
	支持端口自动翻转（Auto MDI/MDIX）功能
</p>

<p>
	采用节能技术，有效节省能源消耗，延长产品寿命
</p>

<p>
	支持MAC地址自学习
</p>

<p>
	低功耗无风扇设计，免除噪音干扰，提高产品稳定性
</p>

<p>
	桌面型壳体，可上机架，即插即用，无需管理
</p>

<p>
	端口性能
</p>

<p>
	提供16个10/100M自适应RJ45端口，所有端口均可实现线速转发；
</p>

<p>
	每端口均支持MDI/MDIX自动翻转及双工/速率自协商；
</p>

<p>
	支持IEEE 802.3x全双工流控和Backpressure半双工流控。
</p>

<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/12/wb.jpg" rel="" style="" target="" title=""><img alt="wb" class="alignnone size-full wp-image-2185" height="374" src="http://localhost:8080/wp-content/uploads/2013/12/wb.jpg" style="" title="" width="317" /></a>
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>7.IP封包</strong>
</p>

<p>
	目前因特网社会的 IP 有两种版本，一种是目前使用最广泛的 IPv4 (Internet&nbsp;Protocol version 4, 因特网协定第四版)， 一种则是预期未来会热门的 IPv6 。IPv4&nbsp;记录的地址由于仅有 32 位，预计在 2020 年前后就会分发完毕，如此一来， 新兴国家或者是新的网络公司，将没有网络可以使用。为了避免这个问题发生，因此就有 IPv6&nbsp;的产生。 &nbsp;IPv6 的地址可以达到 128 位，可以多出 2 的 96 次方倍的网址数量，这样的 IP 数量几乎用不完啦！虽然 IPv6 具有前瞻性，但目前主流媒体大多还是使用IPv4
</p>

<p>
	&nbsp;
</p>

<p>
	你只要知道 IP 表头里面含有： <strong><span style="color:#FF0000;">TTL, Protocol, 来源地址与目标地址</span></strong>也就够了！
</p>

<p>
	而这个 IP 表头的来源与目标 IP ，以及那个判断通过多少路由器的 TTL ，就能了解到这个 IP 将被如何传送到目的端吶
</p>

<p>
	<strong>Time To Live(TTL, 存活时间)</strong>
</p>

<p>
	表示这个 IP 封包的存活时间，范围为 0-255。当这个 IP 封包通过一个路由器时， TTL 就会减一，当 TTL 为 0 时，这个封包将会被直接丢弃。说实在的，要让 IP 封包通过 255 个路由器，还挺难的～ ^_^
</p>

<p>
	<strong>Source Address</strong>
</p>

<p>
	还用讲吗？当然是来源的 IP 地址，从这里我们也知道 IP 是 32 位喔！
</p>

<p>
	<strong>Destination Address</strong>
</p>

<p>
	有来源还需要有目标才能传送，这里就是目标的 IP 地址。
</p>

<p>
	<strong>Protocol Number(协定代码)</strong>
</p>

<p>
	6 &nbsp;TCP (Transmission Control Protocol)<br />
	<span style="line-height: 1.6em;">17 &nbsp;UDP (User Datagram Protocol)</span>
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>8.IP地址组成与分级</strong>
</p>

<p>
	现在我们知道 IP (Internet Protocol) 其实是一种网络封包，而这个封包的表头最重要的就是那个 32 位的来源与目标地址！ 为了方便记忆，所以我们也称这个 32&nbsp;bits 的数值为 IP 网络地址就是了
</p>

<p>
	IP地址分为两个部分喔！ 主要分为 Net_ID (网域号码)与 Host_ID (主机号码)
</p>

<p>
	192.168.0.0~192.168.0.255 这个 Class C 的说明：<br />
	11000000.10101000.00000000.00000000<br />
	11000000.10101000.00000000.11111111<br />
	|----------Net_ID---------|-host--|
</p>

<p>
	<strong>（1）Net_ID 与 Host_ID 的限制</strong>
</p>

<p style="margin-left: 40px;">
	Host_ID&nbsp;在二进制的表示法当中，不可同时为 0 也不可同时为 1 ，因为
</p>

<p style="margin-left: 40px;">
	全为 0 表示整个网段的地址 (Network IP)
</p>

<p style="margin-left: 40px;">
	全为 1 则表示为广播的地址 (Broadcast IP)
</p>

<p style="margin-left: 40px;">
	例如上面的例子当中，192.168.0.0 (Host_ID 全部为 0)以及 192.168.0.255&nbsp;(Host_ID 全部为 1) 不可用来作为网段内主机的 IP 设定，也就是说，这个网段内可用来设定主机的 IP 是由 192.168.0.1 到 192.168.0.254
</p>

<p>
	<strong>（2）在区网内透过 IP 广播传递数据</strong>
</p>

<p style="margin-left: 40px;">
	在同物理网段的主机如果设定相同的网域 IP 范围 (不可重复)，则这些主机都可以透过 CSMA/CD 的功能直接在区网内用广播进行网络的联机，亦即可以直接网卡对网卡传递数据 (透过 MAC 讯框)
</p>

<p>
	<strong>（3）设定不同区网在同物理网段的情况</strong>
</p>

<p style="margin-left: 40px;">
	在同一个物理网段之内，如果两部主机设定成不同的 IP 网段，则由于广播地址的不同，导致无法透过广播的方式来进行联机。 &nbsp;此时得要透过路由器 (router)&nbsp;来进行沟通才能将两个网域连结在一起。
</p>

<p>
	<strong>（4）网域的大小</strong>
</p>

<p style="margin-left: 40px;">
	当 Host_ID 所占用的位越大，亦即 Host_ID 数量越多时，表示同一个网域内可用以设定主机的 IP 数量越多。
</p>

<p>
	你宿舍或家里面的所有计算机，当然都设定在同一个网域内是最方便的， &nbsp;因为如此一来每一部计算机都可以直接透过 MAC 来进行数据的交流，而不必经由 Router (路由器) 来进行封包的转递呢！
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>9.IP的分级</strong>
</p>

<p>
	Class A : 0xxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ==&gt; NetI_D 的开头是 0<br />
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;|--net--|---------host------------|<br />
	Class B : 10xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ==&gt; NetI_D 的开头是 10<br />
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |------net-------|------host------|<br />
	Class C : 110xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ==&gt; NetI_D 的开头是&nbsp;110<br />
	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |-----------net-----------|-host--|<br />
	<strike>Class D : 1110xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ==&gt; NetI_D 的开头是1110</strike>用来作为群播(multicast) 的特殊功能之用 (最常用在大批计算机的网络还原)<br />
	<strike>Class E : 1111xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ==&gt; NetI_D 的开头是1111</strike>保留没有使用的网段
</p>

<p>
	Class A : 0.xx.xx.xx ~ 127.xx.xx.xx<br />
	Class B : 128.xx.xx.xx ~ 191.xx.xx.xx<br />
	Class C : 192.xx.xx.xx ~ 223.xx.xx.xx<br />
	<strike>Class D : 224.xx.xx.xx ~ 239.xx.xx.xx<br />
	Class E : 240.xx.xx.xx ~ 255.xx.xx.xx</strike>
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>10.IP的种类</strong>
</p>

<p>
	Public IP : 公共 IP ，经由 INTERNIC 所统一规划的 IP，有这种 IP 才可以连上 Internet ；
</p>

<p>
	Private IP : 私有 IP 或保留 IP，不能直接连上 Internet 的 IP ， 主要用于局域网络内的主机联机规划。
</p>

<p>
	早在 IPv4 规划的时候就担心 IP 会有不足的情况，而且为了应付某些企业内部的网络设定，于是就有了私有 IP (Private IP) 的产生了。
</p>

<p>
	私有 IP 也分别在 A, B, C 三个 Class 当中各保留一段作为私有 IP 网段，那就是：
</p>

<p>
	 &nbsp; &nbsp;Class A：10.0.0.0 - 10.255.255.255<br />
	 &nbsp; &nbsp;Class B：172.16.0.0 - 172.31.255.255<br />
	 &nbsp; &nbsp;Class C：192.168.0.0 - 192.168.255.255
</p>

<p>
	<strong>loopback IP 网段&nbsp;内部循环网络</strong>
</p>

<p>
	如果你没有安装网络卡在的机器上面， 但是你又希望可以测试一下在你的机器上面设定的服务器环境到底可不可以顺利运作，这个时候怎么办， 嘿嘿！就是利用这个所谓的内部循环网络啦！这个网段在 127.0.0.0/8 这个 Class A，而且默认的主机 (localhost) 的 IP 是 127.0.0.1 呦！
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>11.IP的取得方式</strong>
</p>

<p>
	<strong>（1）直接手动设定(static)： &nbsp;</strong>
</p>

<p style="margin-left: 40px;">
	你可以直接向你的网管询问可用的 IP 相关参数，然后直接编辑配置文件 (或使用某些软件功能) 来设定你的网络。 常见于校园网络的环境中，以及向 ISP 申请固定 IP 的联机环境；
</p>

<p>
	<strong>（2）透过拨接取得： </strong>&nbsp;
</p>

<p style="margin-left: 40px;">
	向你的 ISP 申请注册，取得账号密码后，直接拨接到 ISP ，你的 ISP 会透过他们自己的设定，让你的操作系统取得正确的网络参数。 &nbsp;此时你并不需要手动去编辑与设定相关的网络参数啦。目前台湾的 ADSL 拨接、光纤到大楼、光纤到府等，大部分都是使用拨接的方式。 &nbsp;为因应用户的需求，某些 ISP&nbsp;也提供很多不同的 IP 分配机制。包括 hinet, seednet 等等都有提供 ADSL 拨接后取得固定 IP 的方式喔！ 详情请向你的 ISP 洽询。
</p>

<p>
	<strong>（3）自动取得网络参数 (DHCP)： </strong>&nbsp;
</p>

<p style="margin-left: 40px;">
	在局域网络内会有一部主机负责管理所有计算机的网络参数，你的网络启动时就会主动向该服务器要求 IP 参数， 若取得网络相关参数后，你的主机就能够自行设定好所有服务器给你的网络参数了。最常使用于企业内部、 IP 分享器后端、 &nbsp;校园网络与宿舍环境，及缆线宽带等联机方式。
</p>

<p>
	&nbsp;
</p>

<p>
	<strong>12.路由</strong>
</p>

<p>
	我们知道在同一个区网里面，可以透过 IP 广播的方式来达到资料传递的目的。但如果是非区网内的数据呢？ 这时就得要透过那个所谓的邮局 (路由器) 的帮忙了！
</p>

<p>
	<a href="http://localhost:8080/wp-content/uploads/2013/12/ly.jpg" rel="" style="" target="" title=""><img alt="ly" class="alignnone size-full wp-image-2186" height="226" src="http://localhost:8080/wp-content/uploads/2013/12/ly.jpg" style="" title="" width="208" /></a>
</p>

<p>
	PC01 与 PC11 是不能直接互通数据的。不过， &nbsp;PC01 与 PC11 是如何知道他们两个不在同一个网段内？这当然是透过 Net_ID 来发现的！那么当主机想要传送数据时，他主要的参考是啥？ 很简单！是『路由表 (route table)』，每部主机都有自己的路由表』， 让我们来看一看预设的情况下， PC01 要如何将数据传送到 PC02 呢？
</p>

<blockquote>
	<p>
		1.查询 IP 封包的目标 IP 地址：
	</p>

	<p>
		当 PC01 有 IP 封包需要传送时，主机会查阅 IP 封包表头的目标 IP 地址；
	</p>

	<p>
		2.查询是否位于本机所在的网域之路由设定：
	</p>

	<p>
		PC01 主机会分析自己的路由表，当发现目标 IP 与本机 IP 的 Net_ID 相同时(同一网域)，则 PC01 会直接透过区网功能，将数据直接传送给目的地主机。&nbsp;
	</p>

	<p>
		3.查询预设路由 (default gateway)：
	</p>

	<p>
		但在本案例中， &nbsp;PC01 与 PC11 并非同一网域，因此 PC01 会分析路由表当中是否有其他相符合的路由设定， 如果没有的话，就直接将该 IP 封包送到预设路由器 (default gateway) 上头去，在本案例当中 default gateway 则是 Server&nbsp;A 这一部。
	</p>

	<p>
		4.送出封包至 gateway 后，不理会封包流向：
	</p>

	<p>
		当 IP 由 PC01 送给 Server A 之后， &nbsp;PC01 就不理会接下来的工作。而 Server&nbsp;A 接收到这个封包后， 会依据上述的流程，也分析自己的路由信息，然后向后继续传输到正确的目的地主机上头。
	</p>
</blockquote>

<p>
	Gateway / Router ：网关/路由器的功能就是在负责不同网域之间的封包转递 (IP Forwarding)，由于路由器具有 IP Forwarding 的功能，并且具有管理路由的能力， &nbsp;所以可以将来自不同网域之间的封包进行转递的功能。此外，你的主机与你主机设定的 Gateway 必定是在同一个网段内喔！
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

<p>
	&nbsp;
</p>

		</div>
	</div>
</div>

		</div>
		<div class="sidebar">
		<div id="csidebar">
	<ul>
		<li class="widget widget_recent_entries">
			<h3>分类目录</h3>
			<ul>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_1.html" style="margin-left: 0px;">未分类</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_2.html" style="margin-left: 0px;">HTML</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_3.html" style="margin-left: 10px;">JavaScript</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_17.html" style="margin-left: 10px;">css</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_4.html" style="margin-left: 0px;">Java</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_13.html" style="margin-left: 10px;">集合</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_51.html" style="margin-left: 10px;">多线程</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_54.html" style="margin-left: 10px;">面向对象</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_5.html" style="margin-left: 0px;">JavaWeb</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_6.html" style="margin-left: 10px;">XML</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_20.html" style="margin-left: 10px;">JSP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_23.html" style="margin-left: 10px;">Servlet</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_49.html" style="margin-left: 10px;">XMPP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_7.html" style="margin-left: 0px;">分类总结</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_8.html" style="margin-left: 0px;">千奇百怪问题库</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_9.html" style="margin-left: 0px;">小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_18.html" style="margin-left: 10px;">HTML小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_24.html" style="margin-left: 10px;">Servlet小案例</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_10.html" style="margin-left: 0px;">数据库</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_19.html" style="margin-left: 10px;">JDBC</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_28.html" style="margin-left: 20px;">测试</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_21.html" style="margin-left: 10px;">MySQL</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_22.html" style="margin-left: 10px;">Oracle</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_25.html" style="margin-left: 10px;">SQL</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_11.html" style="margin-left: 0px;">框架</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_26.html" style="margin-left: 10px;">Struts2</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_29.html" style="margin-left: 10px;">Hibernate</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_30.html" style="margin-left: 10px;">Spring</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_31.html" style="margin-left: 10px;">jBPM</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_34.html" style="margin-left: 10px;">Zend framework</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_35.html" style="margin-left: 10px;">Extjs</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_39.html" style="margin-left: 10px;">ThinkPHP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_53.html" style="margin-left: 10px;">jquery</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_55.html" style="margin-left: 10px;">smarty</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_58.html" style="margin-left: 10px;">MyBatis</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_12.html" style="margin-left: 0px;">软件使用</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_27.html" style="margin-left: 10px;">WordPress</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_14.html" style="margin-left: 0px;">面试</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_15.html" style="margin-left: 0px;">项目开发经验</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_16.html" style="margin-left: 0px;">项目进度</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_32.html" style="margin-left: 0px;">缓存技术</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_33.html" style="margin-left: 10px;">Memcached</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_36.html" style="margin-left: 0px;">项目管理工具</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_37.html" style="margin-left: 0px;">Linux</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_52.html" style="margin-left: 10px;">vim</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_38.html" style="margin-left: 0px;">PHP</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_40.html" style="margin-left: 0px;">喜欢的歌</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_41.html" style="margin-left: 0px;">美工</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_42.html" style="margin-left: 10px;">AI</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_43.html" style="margin-left: 10px;">PS</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_44.html" style="margin-left: 0px;">项目管理</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_45.html" style="margin-left: 0px;">服务器管理</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_46.html" style="margin-left: 10px;">Apache</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_47.html" style="margin-left: 10px;">mysql</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_48.html" style="margin-left: 0px;">敏捷开发</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_50.html" style="margin-left: 0px;">PCB</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_56.html" style="margin-left: 0px;">优化</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_57.html" style="margin-left: 10px;">前端优化</a></li>
				
					<li><a href="http://blog.yutouxiuxiu.com/terms/term_59.html" style="margin-left: 0px;">中间件</a></li>
				
			</ul>
		</li>
	</ul>
</div>

		</div>
	</div>
	<div class="footer">
	<div class="copyright">© 2013 芋头修修家 版权所有</div>
</div>

</div>
</body>
</html>
